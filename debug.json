["progn", ["var", [[["id", "re"], ["call", ["id", "import"], ["const", "re"]]]]], ["var", [[["id", "PATS"], ["=", ["=", ["=", ["=", ["=", ["=", ["=", [",", ["object", [["id", "punc"], [",", ["const", "[\\(\\)\\[\\]\\{\\}]|\\.(?!\\.)|\\.{3}|[,;:]|=>"], [",", [":", ["id", "cmp"], ["const", "[<>!=]=|[<>!]"]], [",", [":", ["id", "op"], ["const", "[-+=]"]], [",", [":", ["id", "dec"], ["const", "\\d+"]], [",", [":", ["id", "sq"], ["const", "'((?:\\\\.|.+?)*?)'"]], [",", [":", ["id", "dq"], ["const", "\"((?:\\\\.|.+?)*?)\""]], [",", [":", ["id", "bq"], ["const", "\\`((?:\\\\.|.+?)*?)\\`"]], [",", [":", ["id", "id"], ["const", "[\\w][\\w\\d]*"]], null]]]]]]]]]], ["id", "EVEN_SLASH"]], [",", ["call", [".", ["id", "re"], ["id", "compile"]], ["const", "\\\\{2}"]], ["id", "RE_CLASS"]]], [",", ["call", [".", ["id", "re"], ["id", "compile"]], ["const", "(?<!\\\\)\\[(?:\\\\.|[^\\]]+?)*\\\\]"]], ["id", "RE_GROUP"]]], [",", ["call", [".", ["id", "re"], ["id", "compile"]], ["const", "(?<!\\\\)\\((?!\\?(?!P<))"]], ["id", "TOKEN"]]], [",", ["call", [".", ["id", "re"], ["id", "compile"]], [",", ["+", ["+", ["const", "("], ["call", [".", ["const", ")|("], ["id", "join"]], ["call", [".", ["id", "PATS"], ["id", "values"]], null]]], ["const", ")"]], [".", ["id", "re"], ["id", "M"]]]], ["id", "COMMENT"]]], [",", ["call", [".", ["id", "re"], ["id", "compile"]], [",", ["const", "\\s*(#\\*(?:.|\\n)*?\\*#\\s*|#\\{|#.*$)"], [".", ["id", "re"], ["id", "M"]]]], ["id", "NEWLINE"]]], [",", ["call", [".", ["id", "re"], ["id", "compile"]], ["const", "\\n"]], ["id", "SPACE"]]], ["call", [".", ["id", "re"], ["id", "compile"]], [",", ["const", "\\s+"], [".", ["id", "re"], ["id", "M"]]]]]]]], ["var", [[["id", "NAMES"], ["=", ["=", ["=", [",", ["call", ["id", "list"], ["call", [".", ["id", "PATS"], ["id", "keys"]], null]], ["id", "PRECS"]], [",", ["object", [["id", ";"], [",", ["const", 0], [",", [":", ["const", ","], ["const", 1]], [",", [":", ["const", "="], ["const", 2]], [",", [":", ["const", "after"], ["const", 3]], [",", [":", ["const", "or"], ["const", 4]], [",", [":", ["const", "and"], ["const", 6]], [",", [":", ["const", "in"], ["const", 10]], [",", [":", ["const", "is"], ["const", 10]], [",", [":", ["const", "=="], ["const", 11]], [",", [":", ["const", "!="], ["const", 11]], [",", [":", ["const", "<"], ["const", 12]], [",", [":", ["const", "<="], ["const", 12]], [",", [":", ["const", ">"], ["const", 12]], [",", [":", ["const", ">="], ["const", 12]], [",", [":", ["const", "not"], ["const", 13]], [",", [":", ["const", "~"], ["const", 14]], [",", [":", ["const", "+"], ["const", 15]], [",", [":", ["const", "-"], ["const", 15]], [":", ["const", "."], ["const", 17]]]]]]]]]]]]]]]]]]]]]], ["id", "RIGHT"]]], [",", ["list", ["const", "**"]], ["id", "KWOP"]]], ["list", [",", ["const", "in"], [",", ["const", "is"], [",", ["const", "and"], [",", ["const", "or"], [",", ["const", "not"], ["const", "after"]]]]]]]]]]], ["var", [[["id", "TG"], ["=", [",", ["object", [["id", null], ["id", null]]], ["id", "index"]], ["const", 0]]]]], ["for", ["id", "name"], ["call", [".", ["id", "PATS"], ["id", "keys"]], null], ["block", ["var", [[["id", "pat"], ["call", [".", ["id", "RE_CLASS"], ["id", "sub"]], [",", ["const", ""], ["call", [".", ["id", "EVEN_SLASH"], ["id", "sub"]], [",", ["const", ""], ["[]", ["id", "PATS"], ["id", "name"]]]]]]]]], ["var", [[["id", "count"], [".", ["call", ["id", "list"], ["call", [".", ["id", "RE_GROUP"], ["id", "findall"]], ["id", "pat"]]], ["id", "length"]]]]], ["var", [[["id", "i"], ["const", 0]]]], ["loop", ["block", ["=", ["id", "index"], ["+", ["id", "index"], ["const", 1]]], ["=", ["[]", ["id", "TG"], ["id", "index"]], ["list", [",", ["id", "name"], ["id", "count"]]]], ["=", ["id", "i"], ["+", ["id", "i"], ["const", 1]]]], ["<=", ["id", "i"], ["id", "count"]], null]]], ["var", [[["id", "stresc"], ["fn", ["const", "stresc"], [["id", "s"]], ["block", ["call", [".", ["call", [".", ["call", [".", ["id", "s"], ["id", "replace"]], [",", ["const", "\\\r"], ["const", "\r"]]], ["id", "replace"]], [",", ["const", "\\\n"], ["const", "\n"]]], ["id", "replace"]], [",", ["const", "\\\t"], ["const", "\t"]]]]]]]], ["var", [[["id", "ineq"], ["fn", ["const", "ineq"], [[",", ["id", "value"], ["id", "desc"]]], ["block", ["if", ["is", ["id", "desc"], ["id", "list"]], ["block", ["in", ["id", "value"], ["id", "desc"]]], ["or", ["is", ["id", "desc"], ["id", "none"]], ["==", ["id", "value"], ["id", "desc"]]]]]]]]], ["var", [[["id", "Context"], ["fn", ["const", "Context"], [[",", ["id", "pos"], [",", ["id", "line"], ["id", "col"]]]], ["block", ["return", ["object", [["id", "pos"], ["id", "pos"]], [["id", "line"], ["id", "line"]], [["id", "col"], ["id", "col"]]]]]]]]], ["var", [[["id", "Token"], ["fn", ["const", "Token"], [[",", ["id", "type"], [",", ["id", "match"], ["id", "ctx"]]]], ["block", ["return", ["object", [["id", "type"], ["id", "type"]], [["id", "match"], ["id", "match"]], [["id", "ctx"], ["id", "ctx"]], [["id", "value"], ["[]", ["id", "match"], ["const", 0]]]]]]]]]], ["var", [[["id", "AST"], ["fn", ["const", "AST"], [[",", ["id", "op"], ["id", "args"]]], ["block", ["return", ["object", [["id", "op"], ["id", "op"]], [["id", "args"], ["id", "args"]], [["id", "token"], ["id", "token"]], [["id", "json"], ["fn", ["const", "json"], [null], ["block", ["var", [[["id", "out"], ["list", [".", ["id", "this"], ["id", "op"]]]]]], ["for", ["id", "arg"], [".", ["id", "this"], ["id", "args"]], ["block", ["if", ["is", ["id", "arg"], ["id", "AST"]], ["block", ["call", [".", ["id", "out"], ["id", "push"]], ["call", [".", ["id", "arg"], ["id", "json"]], null]]], ["call", [".", ["id", "out"], ["id", "push"]], ["id", "arg"]]]]], ["if", [".", ["id", "this"], ["id", "token"]], ["block", ["list", [",", ["const", "line"], [",", [".", [".", [".", ["id", "this"], ["id", "token"]], ["id", "ctx"]], ["id", "line"]], ["id", "out"]]]]], ["id", "out"]]]]], [["id", null], ["id", null]], [["id", "origin"], ["fn", ["const", "origin"], [["id", "tok"]], ["block", ["=", [".", ["id", "this"], ["id", "token"]], ["id", "tok"]], ["return", ["id", "this"]]]]], [["id", null], ["id", null]]]]]]]]], ["var", [[["id", "SPECIAL"], ["object", [["id", "("], ["fn", ["const", "("], [[",", ["id", "this"], [",", ["id", "lhs"], ["id", "min_prec"]]]], ["block", ["=", ["id", "lhs"], ["if", ["is", ["id", "lhs"], ["id", "none"]], ["call", [".", ["id", "this"], ["id", "semi"]], null], ["block", ["var", [[["id", "rhs"], ["list", null]]]], ["loop", null, ["var", [[["id", "val"], ["call", [".", ["id", "this"], ["id", "expr"]], null]]]], ["block", ["call", [".", ["id", "rhs"], ["id", "push"]], ["id", "val"]], ["if", ["not", ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", ","]]], ["break"], null]], null], ["call", ["id", "AST"], [",", ["const", "call"], ["list", [",", ["id", "lhs"], ["id", "rhs"]]]]]]]], ["call", [".", ["id", "this"], ["id", "expect"]], ["const", ")"]], ["return", ["id", "lhs"]]]]], [["id", null], ["id", null]], [["id", "["], ["fn", ["const", "["], [[",", ["id", "this"], [",", ["id", "lhs"], ["id", "min_prec"]]]], ["block", ["=", ["id", "lhs"], ["if", ["is", ["id", "lhs"], ["id", "none"]], ["block", ["var", [[["id", "vals"], ["list", null]]]], ["loop", null, ["var", [[["id", "val"], ["call", [".", ["id", "this"], ["id", "expr"]], ["[]", ["id", "PRECS"], ["const", ","]]]]]], ["block", ["call", [".", ["id", "vals"], ["id", "push"]], ["id", "val"]], ["if", ["not", ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", ","]]], ["break"], null]], null], ["call", [".", ["id", "this"], ["id", "expect"]], ["const", "]"]], ["call", ["id", "AST"], [",", ["const", "list"], ["list", ["id", "vals"]]]]], ["call", ["id", "AST"], [",", ["const", "[]"], ["list", [",", ["id", "lhs"], ["call", [".", ["id", "this"], ["id", "expr"]], null]]]]]]], ["call", [".", ["id", "this"], ["id", "expect"]], ["const", "]"]], ["return", ["id", "lhs"]]]]], [["id", null], ["id", null]], [["id", "{"], ["fn", ["const", "{"], [[",", ["id", "this"], [",", ["id", "lhs"], ["id", "min_prec"]]]], ["block", ["if", ["is", ["id", "lhs"], ["id", "none"]], ["block", ["var", [[["id", "entries"], ["list", null]]]], ["loop", null, ["var", [[["id", "nt"], ["call", [".", ["id", "this"], ["id", "peek"]], null]]]], ["block", ["var", [[["id", "name"], ["call", [".", ["id", "this"], ["id", "relaxid"]], null]]]], ["var", [[["id", "vn"], ["call", ["id", "AST"], [",", ["const", "id"], ["list", ["id", "name"]]]]]]], ["var", [[["id", "value"], ["if", ["call", [".", ["id", "this"], ["id", "peek"]], ["const", "("]], ["block", ["var", [[["id", "args"], ["call", [".", ["id", "this"], ["id", "funcargs"]], null]]]], ["var", [[["id", "body"], ["call", [".", ["id", "this"], ["id", "block"]], null]]]], ["call", ["id", "AST"], [",", ["const", "fn"], ["list", [",", ["call", ["id", "AST"], [",", ["const", "const"], ["list", ["id", "name"]]]], [",", ["id", "args"], ["id", "body"]]]]]]], ["if", ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", ":"]], ["call", [".", ["id", "this"], ["id", "expr"]], ["[]", ["id", "PRECS"], ["const", ","]]], ["id", "vn"]]]]]], ["call", [".", ["id", "entries"], ["id", "push"]], ["list", [",", ["id", "vn"], ["id", "value"]]]], ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", ","]]], ["fail", ["const", "Not implemented: Block call"]]], ["call", ["id", "AST"], [",", ["const", "object"], ["id", "entries"]]]], null], ["call", [".", ["id", "this"], ["id", "expect"]], ["const", "}"]], ["return", ["id", "lhs"]]]]], [["id", null], ["id", null]], [["id", "."], ["fn", ["const", "."], [[",", ["id", "this"], [",", ["id", "lhs"], ["id", "min_prec"]]]], ["block", ["call", ["id", "AST"], [",", ["const", "."], [",", ["id", "lhs"], ["call", ["id", "AST"], [",", ["const", "const"], ["list", ["call", [".", ["id", "this"], ["id", "relaxid"]], null]]]]]]]]]], [["id", null], ["id", null]], [["id", ","], ["fn", ["const", ","], [[",", ["id", "this"], [",", ["id", "lhs"], ["id", "min_prec"]]]], ["block", ["var", [[["id", "elems"], ["list", ["id", "lhs"]]]]], ["loop", ["block", ["call", [".", ["id", "elems"], ["id", "push"]], ["call", [".", ["id", "this"], ["id", "expr"]], ["[]", ["id", "PRECS"], ["const", ","]]]]], ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", ","]], null], ["call", ["id", "AST"], [",", ["const", ","], ["id", "lhs"]]]]]], [["id", null], ["id", null]]]]]], ["var", [[["id", "KW"], ["object", [["id", "if"], ["fn", ["const", "if"], [["id", "this"]], ["block", ["var", [[["id", "cond"], ["=", ["=", [",", ["call", [".", ["id", "this"], ["id", "condition"]], null], ["id", "th"]], [",", ["call", [".", ["id", "this"], ["id", "block"]], null], ["id", "el"]]], ["if", ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", "else"]], ["call", [".", ["id", "this"], ["id", "block"]], null], ["id", "none"]]]]]], ["call", ["id", "AST"], [",", ["const", "if"], ["list", [",", ["id", "cond"], [",", ["id", "th"], ["id", "el"]]]]]]]]], [["id", null], ["id", null]], [["id", "loop"], ["fn", ["const", "loop"], [["id", "this"]], ["block", ["var", [[["id", "always"], ["call", [".", ["id", "this"], ["id", "block"]], null]]]], ["if", ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", "while"]], ["block", ["call", ["id", "AST"], [",", ["const", "loop"], ["list", [",", ["id", "always"], [",", ["call", [".", ["id", "this"], ["id", "condition"]], null], ["call", [".", ["id", "this"], ["id", "block"]], null]]]]]]], ["call", ["id", "AST"], [",", ["const", "loop"], ["list", ["id", "always"]]]]]]]], [["id", null], ["id", null]], [["id", "while"], ["fn", ["const", "while"], [["id", "this"]], ["block", ["call", ["id", "AST"], [",", ["const", "loop"], ["list", [",", ["call", [".", ["id", "this"], ["id", "condition"]], null], ["call", [".", ["id", "this"], ["id", "block"]], null]]]]]]]], [["id", null], ["id", null]], [["id", "for"], ["fn", ["const", "for"], [["id", "this"]], ["block", ["call", [".", ["id", "this"], ["id", "expect"]], ["const", "("]], ["call", [".", ["id", "this"], ["id", "expect"]], ["const", "var"]], ["var", [[["id", "itvt"], ["call", [".", ["id", "this"], ["id", "peek"]], null]]]], ["var", [[["id", "itvar"], ["call", ["id", "AST"], [",", ["const", "id"], ["list", ["call", [".", ["id", "this"], ["id", "relaxid"]], null]]]]]]], ["call", [".", ["id", "this"], ["id", "expect"]], ["const", "in"]], ["var", [[["id", "iter"], ["call", [".", ["id", "this"], ["id", "expr"]], ["[]", ["id", "PRECS"], ["const", ","]]]]]], ["call", [".", ["id", "this"], ["id", "expect"]], ["const", ")"]], ["call", ["id", "AST"], [",", ["const", "for"], ["list", [",", ["id", "itvar"], [",", ["id", "iter"], ["call", [".", ["id", "this"], ["id", "block"]], null]]]]]]]]], [["id", null], ["id", null]], [["id", "return"], ["fn", ["const", "return"], [["id", "this"]], ["call", ["id", "AST"], [",", ["const", "return"], ["call", [".", ["id", "this"], ["id", "expr"]], ["const", 0]]]]]], [["id", "fail"], ["fn", ["const", "fail"], [["id", "this"]], ["call", ["id", "AST"], [",", ["const", "fail"], ["call", [".", ["id", "this"], ["id", "expr"]], ["const", 0]]]]]], [["id", "var"], ["fn", ["const", "var"], [["id", "this"]], ["block", ["var", [[["id", "vars"], ["list", null]]]], ["loop", ["block", ["var", [[["id", "nt"], ["call", [".", ["id", "this"], ["id", "peek"]], null]]]], ["var", [[["id", "name"], [",", ["call", [".", ["id", "this"], ["id", "relaxid"]], null], ["id", "value"]]]]], ["=", ["id", "name"], ["call", ["id", "AST"], [",", ["const", "id"], ["id", "name"]]]], ["if", ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", "="]], ["block", ["=", ["id", "value"], ["call", [".", ["id", "this"], ["id", "expr"]], ["const", 0]]]], null], ["call", [".", ["id", "vars"], ["id", "push"]], ["list", [",", ["id", "name"], ["id", "value"]]]]], ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", ","]], null], ["call", ["id", "AST"], [",", ["const", "var"], ["id", "vars"]]]]]], [["id", null], ["id", null]]]]]], ["var", [[["id", "Parser"], ["object", [["id", "init"], ["fn", ["const", "init"], [["id", "src"]], ["block", ["=", [".", ["id", "this"], ["id", "src"]], ["id", "src"]], ["=", [".", ["id", "this"], ["id", "ctx"]], ["call", ["id", "Context"], [",", ["const", 0], [",", ["const", 1], ["const", 1]]]]], ["=", [".", ["id", "this"], ["id", "cur"]], ["id", "none"]], ["call", [".", ["id", "this"], ["id", "consume"]], null]]]], [["id", null], ["id", null]], [["id", "repos"], ["fn", ["const", "repos"], [["id", "m"]], ["block", ["if", ["is", ["id", "m"], ["id", "none"]], ["return", null], null], ["var", [[["id", "old"], ["=", ["=", ["=", [",", [".", ["id", "this"], ["id", "ctx"]], ["id", "l"]], [",", [".", ["id", "old"], ["id", "line"]], ["id", "c"]]], [",", [".", ["id", "old"], ["id", "col"]], ["id", "p"]]], ["+", [".", ["id", "old"], ["id", "pos"]], [".", ["[]", ["id", "m"], ["const", 0]], ["id", "length"]]]]]]], ["var", [[["id", "lines"], ["call", [".", ["id", "NEWLINE"], ["id", "split"]], ["[]", ["id", "m"], ["const", 0]]]]]], ["if", [">", [".", ["id", "lines"], ["id", "length"]], ["const", 1]], ["block", ["=", ["id", "l"], ["-", ["+", ["id", "l"], [".", ["id", "lines"], ["id", "length"]]], ["const", 1]]], ["=", ["id", "c"], [".", ["[]", ["id", "lines"], ["-", ["const", 1]]], ["id", "length"]]]], ["=", ["id", "c"], ["+", ["id", "c"], [".", ["[]", ["id", "m"], ["const", 0]], ["id", "length"]]]]], ["=", [".", ["id", "this"], ["id", "ctx"]], ["call", ["id", "Context"], [",", ["id", "p"], [",", ["id", "l"], ["id", "c"]]]]], ["return", ["id", "old"]]]]], [["id", null], ["id", null]], [["id", "error"], ["fn", ["const", "error"], [["id", "msg"]], ["return", ["object", [["id", "typename"], [",", ["const", "Error"], [",", ["id", "msg"], [":", ["const", "ctx"], [".", ["id", "this"], ["id", "ctx"]]]]]]]]]], [["id", "match"], ["fn", ["const", "match"], [["id", "reg"]], ["call", [".", ["id", "reg"], ["id", "match"]], [",", [".", ["id", "this"], ["id", "src"]], [".", [".", ["id", "this"], ["id", "ctx"]], ["id", "pos"]]]]]], [["id", "next"], ["fn", ["const", "next"], [null], ["block", ["var", [[["id", "m"], null], [["id", "type"], null]]], ["loop", null, ["=", ["id", "m"], ["call", [".", ["id", "this"], ["id", "match"]], ["id", "COMMENT"]]], ["block", ["call", [".", ["id", "this"], ["id", "repos"]], ["id", "m"]]], null], ["call", [".", ["id", "this"], ["id", "repos"]], ["call", [".", ["id", "this"], ["id", "match"]], ["id", "SPACE"]]], ["=", ["id", "m"], ["call", [".", ["id", "this"], ["id", "match"]], ["id", "TOKEN"]]], ["if", ["is", ["id", "m"], ["id", "none"]], ["return", ["id", "none"]], null], ["if", ["in", ["[]", ["id", "m"], ["const", 0]], ["id", "KW"]], ["=", ["id", "type"], ["const", "kw"]], ["if", ["in", ["[]", ["id", "m"], ["const", 0]], ["id", "KWOP"]], ["=", ["id", "type"], ["const", "op"]], ["block", ["var", [[["id", "tt_gc"], ["[]", ["id", "TG"], [".", ["id", "m"], ["id", "lastindex"]]]]]], ["if", ["is", ["id", "tt_gc"], ["id", "none"]], ["fail", ["+", ["const", "Invalid regex group "], [".", ["id", "m"], ["id", "lastindex"]]]], null], ["=", ["id", "m"], ["[]", ["call", [".", ["id", "m"], ["id", "groups"]], null], ["call", ["id", "slice"], [",", ["-", [".", ["id", "m"], ["id", "lastindex"]], ["const", 1]], ["+", [".", ["id", "m"], ["id", "lastindex"]], ["[]", ["id", "tt_gc"], ["const", 1]]]]]]], ["=", ["id", "type"], ["[]", ["id", "tt_gc"], ["const", 0]]]]]], ["call", ["id", "Token"], [",", ["id", "type"], [",", ["id", "m"], ["call", [".", ["id", "this"], ["id", "repos"]], ["id", "m"]]]]]]]], [["id", null], ["id", null]], [["id", "consume"], ["fn", ["const", "consume"], [null], ["return", ["=", [".", ["id", "this"], ["id", "cur"]], ["call", [".", ["id", "this"], ["id", "next"]], null]]]]], [["id", "peek"], ["fn", ["const", "peek"], [[",", ["id", "value"], ["id", "type"]]], ["block", ["var", [[["id", "cur"], [".", ["id", "this"], ["id", "cur"]]]]], ["if", ["and", ["and", ["id", "cur"], ["call", ["id", "ineq"], [",", [".", ["id", "cur"], ["id", "value"]], ["id", "value"]]]], ["call", ["id", "ineq"], [",", [".", ["id", "cur"], ["id", "type"]], ["id", "type"]]]], ["block", ["return", ["id", "cur"]]], null]]]], [["id", null], ["id", null]], [["id", "maybe"], ["fn", ["const", "maybe"], [[",", ["id", "value"], ["id", "type"]]], ["block", ["var", [[["id", "tok"], ["call", [".", ["id", "this"], ["id", "peek"]], [",", ["id", "value"], ["id", "type"]]]]]], ["if", ["id", "tok"], ["call", [".", ["id", "this"], ["id", "consume"]], null], null], ["return", ["id", "tok"]]]]], [["id", null], ["id", null]], [["id", "expect"], ["fn", ["const", "expect"], [[",", ["id", "value"], ["id", "type"]]], ["block", ["if", ["var", [[["id", "tok"], ["call", [".", ["id", "this"], ["id", "maybe"]], [",", ["id", "value"], ["id", "type"]]]]]], ["return", ["id", "tok"]], null], ["var", [[["id", "tok"], ["call", [".", ["id", "this"], ["id", "peek"]], null]]]], ["fail", ["call", [".", ["id", "this"], ["id", "error"]], ["+", ["+", ["+", ["+", ["+", ["const", "Expected "], ["or", ["id", "value"], ["id", "type"]]], ["const", ", got "]], [".", ["id", "tok"], ["id", "type"]]], ["const", ":"]], [".", ["id", "tok"], ["id", "value"]]]]]]]], [["id", null], ["id", null]], [["id", "expected"], ["fn", ["const", "expected"], [["id", "what"]], ["block", ["call", [".", ["id", "this"], ["id", "error"]], ["+", ["+", ["+", ["const", "Expected "], ["id", "what"]], ["const", ", got "]], ["call", [".", ["id", "this"], ["id", "peek"]], null]]]]]], [["id", null], ["id", null]], [["id", "parse"], ["fn", ["const", "parse"], [null], ["call", ["id", "AST"], [",", ["const", "progn"], ["call", [".", ["id", "this"], ["id", "semi"]], null]]]]], [["id", "condition"], ["fn", ["const", "condition"], [null], ["block", ["if", ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", "("]], ["block", ["var", [[["id", "ex"], ["call", [".", ["id", "this"], ["id", "expr"]], ["const", 0]]]]], ["call", [".", ["id", "this"], ["id", "expect"]], ["const", ")"]], ["return", ["id", "ex"]]], ["call", [".", ["id", "this"], ["id", "expr"]], ["const", 0]]]]]], [["id", null], ["id", null]], [["id", "funcargs"], ["fn", ["const", "funcargs"], [null], ["block", ["call", [".", ["id", "this"], ["id", "expect"]], ["const", "("]], ["var", [[["id", "args"], ["list", null]]]], ["loop", ["block", ["call", [".", ["id", "args"], ["id", "push"]], ["call", [".", ["id", "this"], ["id", "atom"]], null]]], ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", ","]], null], ["call", [".", ["id", "this"], ["id", "expect"]], ["const", ")"]], ["return", ["id", "args"]]]]], [["id", null], ["id", null]], [["id", "relaxid"], ["fn", ["const", "relaxid"], [null], ["block", ["var", [[["id", "tok"], ["call", [".", ["id", "this"], ["id", "maybe"]], [",", ["id", "none"], ["list", [",", ["const", "id"], [",", ["const", "kw"], [",", ["const", "op"], [",", ["const", "cmp"], ["const", "assign"]]]]]]]]]]], ["if", ["id", "tok"], [".", ["id", "tok"], ["id", "value"]], ["if", ["=", ["id", "tok"], ["call", [".", ["id", "this"], ["id", "maybe"]], [",", ["id", "none"], ["list", [",", ["const", "sq"], [",", ["const", "dq"], ["const", "bq"]]]]]]], ["[]", [".", ["id", "tok"], ["id", "match"]], ["const", 1]], null]]]]], [["id", null], ["id", null]], [["id", "ident"], ["fn", ["const", "ident"], [null], ["block", ["if", ["var", [[["id", "tok"], ["call", [".", ["id", "this"], ["id", "maybe"]], [",", ["id", "none"], ["const", "id"]]]]]], [".", ["id", "tok"], ["id", "value"]], null]]]], [["id", null], ["id", null]], [["id", "block"], ["fn", ["const", "block"], [null], ["block", ["var", [[["id", "x"], null], [["id", "tok"], null]]], ["if", ["=", ["id", "tok"], ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", "{"]]], ["block", ["=", ["id", "x"], ["call", [".", ["id", "this"], ["id", "semi"]], null]], ["call", [".", ["id", "this"], ["id", "expect"]], ["const", "}"]], ["call", [".", ["id", "x"], ["id", "origin"]], ["id", "tok"]]], ["block", ["=", ["id", "x"], ["call", [".", ["id", "this"], ["id", "expr"]], ["const", 0]]], ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", ";"]]]], ["return", ["id", "x"]]]]], [["id", null], ["id", null]], [["id", "semi"], ["fn", ["const", "semi"], [null], ["block", ["var", [[["id", "ls"], ["list", null]]]], ["loop", ["block", ["loop", null, ["call", [".", ["id", "this"], ["id", "maybe"]], ["const", ";"]], ["block"], null]], ["var", [[["id", "val"], ["call", [".", ["id", "this"], ["id", "expr"]], ["const", 0]]]]], ["block", ["call", [".", ["id", "ls"], ["id", "push"]], ["id", "val"]]]], ["if", ["==", [".", ["id", "ls"], ["id", "length"]], ["const", 1]], ["[]", ["id", "ls"], ["const", 0]], ["call", ["id", "AST"], [",", ["const", "block"], ["id", "ls"]]]]]]], [["id", null], ["id", null]], [["id", "expr"], ["fn", ["const", "expr"], [["id", "min_prec"]], ["block", ["var", [[["id", "lhs"], ["call", [".", ["id", "this"], ["id", "atom"]], null]]]], ["loop", null, ["var", [[["id", "tok"], ["call", [".", ["id", "this"], ["id", "peek"]], null]]]], ["block", ["var", [[["id", "op"], [".", ["id", "tok"], ["id", "value"]]]]], ["if", ["==", ["id", "op"], ["const", ";"]], ["break"], null], ["var", [[["id", "prec"], ["[]", ["id", "PRECS"], ["id", "op"]]]]], ["if", ["or", ["is", ["id", "prec"], ["id", "none"]], ["<", ["id", "prec"], ["id", "min_prec"]]], ["break"], null], ["call", [".", ["id", "this"], ["id", "consume"]], null], ["=", ["id", "lhs"], ["if", ["in", ["id", "op"], ["id", "SPECIAL"]], ["call", ["[]", ["id", "SPECIAL"], ["id", "op"]], [",", ["id", "lhs"], ["id", "tok"]]], ["block", ["var", [[["id", "rhs"], ["call", [".", ["id", "this"], ["id", "expr"]], ["+", ["id", "prec"], ["not", ["in", ["id", "op"], ["id", "RIGHT"]]]]]]]], ["if", ["is", ["id", "rhs"], ["id", "none"]], ["break"], null], ["call", ["id", "AST"], [",", ["id", "op"], [",", ["id", "lhs"], ["id", "rhs"]]]]]]], ["call", [".", ["id", "lhs"], ["id", "origin"]], ["id", "tok"]]], null], ["return", ["id", "lhs"]]]]], [["id", null], ["id", null]], [["id", "atom"], ["fn", ["const", "atom"], [null], ["block", ["var", [[["id", "cur"], ["call", [".", ["id", "this"], ["id", "peek"]], null]]]], ["if", ["is", ["id", "cur"], ["id", "none"]], ["return", null], null], ["var", [[["id", "val"], ["=", [",", [".", ["id", "cur"], ["id", "value"]], ["id", "ct"]], [".", ["id", "cur"], ["id", "type"]]]]]], ["if", ["in", ["id", "val"], ["list", [",", ["const", ")"], [",", ["const", "]"], [",", ["const", "}"], [",", ["const", ","], [",", ["const", ";"], ["const", "else"]]]]]]]], ["block", ["return", ["id", "none"]]], null], ["call", [".", ["id", "this"], ["id", "consume"]], null], ["var", [[["id", "result"], ["if", ["==", ["id", "ct"], ["const", "dec"]], ["call", ["id", "AST"], [",", ["const", "const"], ["call", ["id", "int"], [",", ["id", "val"], ["const", 10]]]]], ["if", ["in", ["id", "ct"], ["list", [",", ["const", "sq"], ["const", "dq"]]]], ["call", ["id", "AST"], [",", ["const", "const"], ["call", ["id", "stresc"], ["[]", [".", ["id", "cur"], ["id", "match"]], ["const", 1]]]]], ["if", ["==", ["id", "ct"], ["const", "bq"]], ["call", ["id", "AST"], [",", ["const", "const"], ["[]", [".", ["id", "cur"], ["id", "match"]], ["const", 1]]]], ["if", ["==", ["id", "ct"], ["const", "id"]], ["call", ["id", "AST"], [",", ["const", "id"], ["id", "val"]]], ["if", ["==", ["id", "ct"], ["const", "kw"]], ["call", ["[]", ["id", "KW"], ["id", "val"]], ["id", "this"]], ["block", ["fail", ["call", [".", ["id", "this"], ["id", "error"]], ["+", ["+", ["+", ["const", "Unknown token "], ["id", "ct"]], ["const", " = "]], ["id", "val"]]]]]]]]]]]]], ["call", [".", ["id", "result"], ["id", "origin"]], ["id", "cur"]]]]], [["id", null], ["id", null]]]]]], ["var", [[["id", "json"], ["call", ["id", "import"], ["const", "json"]]]]], ["var", [[["id", "f"], ["call", ["id", "open"], ["[]", ["id", "argv"], ["const", 0]]]]]], ["var", [[["id", "p"], ["call", [".", ["id", "Parser"], ["id", "init"]], ["call", [".", ["id", "f"], ["id", "read"]], null]]]]], ["call", [".", ["id", "f"], ["id", "close"]], null], ["var", [[["id", "ast"], ["call", [".", ["id", "p"], ["id", "parse"]], null]]]], ["call", ["id", "print"], ["id", "ast"]], ["call", ["id", "print"], ["call", [".", ["id", "json"], ["id", "dumps"]], ["call", [".", ["id", "ast"], ["id", "json"]], null]]]]